---
title: "トリガー"
postdate: "2021-03-25"
update: "2021-03-26"
SeriesName: "ハンズオンPostgreSQL"
SeriesSlug: "HandsOnPostgreSQL"
tags: ["PostgreSQL"]
keywords: ["PostgreSQL", "Database", "Index"]
published: false
---

> 特定のテーブルへ更新処理が行われたタイミングで、指定した関数の呼び出しを定義することができます。この定義のことをトリガーといいます。
トリガーの作成時には影響範囲をオプションで指定することができます。影響範囲の設定は、対象テーブルの行ごとの更新に対してトリガーの実行を行うものと、SQLごとの更新に対してトリガーの実行を行うものの2種類があります。

> デフォルトではSQLごとの更新に対してトリガーを実行するようになっています。
また、トリガーで指定するイベントは、ORを使用することで複数指定できます。

> したがって正解は ・トリガーで指定するイベントは、複数指定することができる ・デフォルトでは、トリガーイベントとなるSQLが実行されるごとに、トリガーの処理が実行される です。

> ・変更の前の値と後の値を「BEFORE」「AFTER」キーワードに格納することができる。正しくは、「OLD」「NEW」キーワードです。

> ・トリガーで使用する関数は、戻り値がNULL以外である必要がある。呼び出し対象の関数が返す値がNULLでも問題ありません。

> ・トリガーを実行するタイミングは、イベントの前にしか指定できない。BEFORE、AFTERオプションを設定することで、トリガーの実行タイミングを、指定したイベントの実行前後に指定できます。

> ・トリガーで使用する関数は、戻り値にBOOLEAN型を使用することが定められている。呼び出し対象の関数は、TRIGGER型を返すように定義しなければいけません。